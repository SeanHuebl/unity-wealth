// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: transactions.sql

package database

import (
	"context"
	"database/sql"
)

const createTransaction = `-- name: CreateTransaction :exec
INSERT INTO transactions (
        id,
        user_id,
        transaction_date,
        merchant,
        amount_cents,
        detailed_category_id
    )
VALUES (?1, ?2, ?3, ?4, ?5, ?6)
`

type CreateTransactionParams struct {
	ID                 string
	UserID             string
	TransactionDate    string
	Merchant           string
	AmountCents        int64
	DetailedCategoryID int64
}

func (q *Queries) CreateTransaction(ctx context.Context, arg CreateTransactionParams) error {
	_, err := q.db.ExecContext(ctx, createTransaction,
		arg.ID,
		arg.UserID,
		arg.TransactionDate,
		arg.Merchant,
		arg.AmountCents,
		arg.DetailedCategoryID,
	)
	return err
}

const deleteTransactionById = `-- name: DeleteTransactionById :exec
DELETE FROM transactions
WHERE id = ?1
    AND user_id = ?2
`

type DeleteTransactionByIdParams struct {
	ID     string
	UserID string
}

func (q *Queries) DeleteTransactionById(ctx context.Context, arg DeleteTransactionByIdParams) error {
	_, err := q.db.ExecContext(ctx, deleteTransactionById, arg.ID, arg.UserID)
	return err
}

const getDetailedCategories = `-- name: GetDetailedCategories :many
SELECT id, name, description, primary_category_id
FROM detailed_categories
`

func (q *Queries) GetDetailedCategories(ctx context.Context) ([]DetailedCategory, error) {
	rows, err := q.db.QueryContext(ctx, getDetailedCategories)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []DetailedCategory
	for rows.Next() {
		var i DetailedCategory
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.PrimaryCategoryID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getDetailedCategoryId = `-- name: GetDetailedCategoryId :one
SELECT id
FROM detailed_categories
WHERE name = ?1
`

func (q *Queries) GetDetailedCategoryId(ctx context.Context, name string) (int64, error) {
	row := q.db.QueryRowContext(ctx, getDetailedCategoryId, name)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const getPrimaryCategories = `-- name: GetPrimaryCategories :many
SELECT id, name
FROM primary_categories
`

func (q *Queries) GetPrimaryCategories(ctx context.Context) ([]PrimaryCategory, error) {
	rows, err := q.db.QueryContext(ctx, getPrimaryCategories)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []PrimaryCategory
	for rows.Next() {
		var i PrimaryCategory
		if err := rows.Scan(&i.ID, &i.Name); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateTransactionByID = `-- name: UpdateTransactionByID :one
UPDATE transactions
SET transaction_date = ?1,
    merchant = ?2,
    amount_cents = ?3,
    detailed_category_id = ?4,
    updated_at = ?5
WHERE id = ?6
RETURNING id,
    transaction_date,
    merchant,
    amount_cents,
    detailed_category_id
`

type UpdateTransactionByIDParams struct {
	TransactionDate    string
	Merchant           string
	AmountCents        int64
	DetailedCategoryID int64
	UpdatedAt          sql.NullTime
	ID                 string
}

type UpdateTransactionByIDRow struct {
	ID                 string
	TransactionDate    string
	Merchant           string
	AmountCents        int64
	DetailedCategoryID int64
}

func (q *Queries) UpdateTransactionByID(ctx context.Context, arg UpdateTransactionByIDParams) (UpdateTransactionByIDRow, error) {
	row := q.db.QueryRowContext(ctx, updateTransactionByID,
		arg.TransactionDate,
		arg.Merchant,
		arg.AmountCents,
		arg.DetailedCategoryID,
		arg.UpdatedAt,
		arg.ID,
	)
	var i UpdateTransactionByIDRow
	err := row.Scan(
		&i.ID,
		&i.TransactionDate,
		&i.Merchant,
		&i.AmountCents,
		&i.DetailedCategoryID,
	)
	return i, err
}
